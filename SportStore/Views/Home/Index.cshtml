@model ProductsListViewModel

@{
    ViewData["Title"] = "Home Page";
    var searchTerm = Context.Request.Query["search"];
}

<div class="container">

    @if (Model.Products != null && Model.Products.Any())
    {
        <div class="row g-3">
            @foreach (var product in Model.Products)
            {
                <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                    <partial name="ProductSummary" model="product" />
                </div>
            }
        </div>

        <!-- Pagination -->
        <nav class="mt-4 d-flex justify-content-center">
            <ul class="pagination">
                <li class="page-item @(Model.PagingInfo.HasPrevious ? "" : "disabled")">
                    <a class="page-link"
                       asp-action="Index"
                       asp-route-productPage="@Model.PagingInfo.PrevPage">
                        &laquo;
                    </a>
                </li>

                @for (int i = 1; i <= Model.PagingInfo.TotalPages; i++)
                {
                    if (i >= Model.PagingInfo.CurrentPage - 2 &&
                    i <= Model.PagingInfo.CurrentPage + 2)
                    {
                        <li class="page-item @(i == Model.PagingInfo.CurrentPage ? "active" : "")">
                            <a class="page-link"
                               asp-action="Index"
                               asp-route-productPage="@i">
                                @i
                            </a>
                        </li>
                    }
                }

                <li class="page-item @(Model.PagingInfo.HasNext ? "" : "disabled")">
                    <a class="page-link"
                       asp-action="Index"
                       asp-route-productPage="@Model.PagingInfo.NextPage">
                        &raquo;
                    </a>
                </li>
            </ul>
        </nav>
    }
    else
    {
        <!-- Empty Search / Filter State -->
        <div class="text-center py-5">
            <h4 class="fw-bold">
                There are no results
                @if (!string.IsNullOrWhiteSpace(searchTerm))
                {
                    <span>for “@searchTerm”</span>
                }
            </h4>

            <ul class="list-unstyled mt-3 text-muted">
                <li>• Check your spelling for typing errors</li>
                <li>• Try searching with short and simple keywords</li>
                <li>• Try searching more general terms, then filter the results</li>
            </ul>

            <a asp-controller="Home"
               asp-action="Index"
               class="btn btn-primary mt-3">
                Go to homepage
            </a>
        </div>
    }
</div>
