@model IEnumerable<Order>

@{
    ViewData["Title"] = "My Orders";
}

<div class="container mt-4 pb-5">
    <div class="row">
        <!-- Sidebar  -->
        <div class="col-md-3 d-none d-md-block">
            <div class="list-group shadow-sm border-0 mb-4 sidebar-menu">
                <a href="#" class="list-group-item list-group-item-action border-0">
                    <i class="bi bi-person me-3"></i> My Account
                </a>
                <a asp-action="Index" class="list-group-item list-group-item-action active border-0 fw-bold">
                    <i class="bi bi-box-seam me-3 text-sport-primary"></i> Orders
                </a>
                <a href="#" class="list-group-item list-group-item-action border-0">
                    <i class="bi bi-envelope me-3"></i> Inbox
                </a>
                <a href="#" class="list-group-item list-group-item-action border-0">
                    <i class="bi bi-heart me-3"></i> Wishlist
                </a>
                <hr class="mx-3 my-2">
                <a href="#" class="list-group-item list-group-item-action border-0 text-danger">
                    <i class="bi bi-box-arrow-right me-3"></i> Logout
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-9">
            <div class="bg-white shadow-sm rounded p-4">
                <h4 class="fw-bold mb-4">Orders</h4>

                <!-- Tabs -->
                <ul class="nav nav-tabs mb-4" id="orderTabs" role="tablist">
                    <li class="nav-item">
                        <button class="nav-link active text-uppercase fw-bold small" id="ongoing-tab" data-bs-toggle="tab" data-bs-target="#ongoing">
                            Ongoing/Delivered (@Model.Count())
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link text-uppercase fw-bold small" id="canceled-tab" data-bs-toggle="tab" data-bs-target="#canceled">
                            Canceled/Returned (0)
                        </button>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="ongoing">
                        @if (!Model.Any())
                        {
                            <div class="text-center py-5">
                                <div class="mb-3">
                                    <i class="bi bi-bag-x display-1 text-light-grey"></i>
                                </div>
                                <h5 class="fw-bold">No orders yet</h5>
                                <p class="text-muted">When you place an order, it will appear here.</p>
                                <a asp-controller="Home" asp-action="Index" class="btn btn-sport fw-bold px-4">START SHOPPING</a>
                            </div>
                        }
                        else
                        {
                            @foreach (var order in Model)
                            {
                                @foreach (var item in order.OrderItems)
                                {
                                    <div class="card mb-3 border shadow-none order-item-card">
                                        <div class="card-body">
                                            <div class="row align-items-center">
                                                <!-- Image -->
                                                <div class="col-3 col-md-2">
                                                    <img src="~/images/@(item.Product.PhotoPath ?? "noimage.png")"
                                                         class="img-fluid rounded border" alt="@item.Product.Name">
                                                </div>

                                                <!-- Info -->
                                                <div class="col-6 col-md-7">
                                                    <h6 class="mb-1 fw-bold">@item.Product.Name</h6>
                                                    <p class="small text-muted mb-1">Order #@order.OrderID</p>

                                                    @if (order.Shipped)
                                                    {
                                                        <span class="badge bg-success-soft text-success text-uppercase" style="font-size: 0.7rem;">Delivered</span>
                                                        <p class="small fw-bold mt-1 mb-0">On @order.ShippedDate.ToString("dd MMM yyyy")</p>
                                                    }
                                                    else
                                                    {
                                                        <span class="badge bg-warning-soft text-dark text-uppercase" style="font-size: 0.7rem;">Processing</span>
                                                        <p class="small mt-1 mb-0 text-muted">Placed on @order.OrderDate.ToString("dd MMM yyyy")</p>
                                                    }
                                                </div>

                                                <!-- Action -->
                                                <div class="col-3 col-md-3 text-end">
                                                    <a href="#" class="text-sport-primary text-decoration-none fw-bold small">SEE DETAILS</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                        }
                    </div>

                    <div class="tab-pane fade" id="canceled">
                        <div class="text-center py-5 text-muted">
                            <i class="bi bi-slash-circle display-4 d-block mb-3"></i>
                            No canceled orders to show.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    :root {
        --sport-blue: #0056b3;
        --sport-blue-hover: #004494;
        --sport-blue-soft: rgba(0, 86, 179, 0.08);
        --sport-bg: #f8f9fa;
        --text-muted: #75757a;
    }

    body {
        background-color: var(--sport-bg);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Primary Text Color */
    .text-sport-primary {
        color: var(--sport-blue) !important;
    }

    /* Buttons */
    .btn-sport {
        background-color: var(--sport-blue);
        color: white;
        border: none;
        transition: all 0.2s;
    }

        .btn-sport:hover {
            background-color: var(--sport-blue-hover);
            color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

    /* Sidebar Styling */
    .sidebar-menu .list-group-item {
        padding: 0.8rem 1.25rem;
        color: #444;
    }

        .sidebar-menu .list-group-item.active {
            background-color: var(--sport-blue-soft) !important;
            color: var(--sport-blue) !important;
            border-left: 4px solid var(--sport-blue) !important;
            border-radius: 0;
        }

        .sidebar-menu .list-group-item:hover:not(.active) {
            background-color: #f1f1f1;
        }

    /* Tab Styling */
    .nav-tabs {
        border-bottom: 2px solid #eee;
    }

        .nav-tabs .nav-link {
            color: var(--text-muted);
            border: none;
            border-bottom: 3px solid transparent;
            padding: 10px 20px;
        }

            .nav-tabs .nav-link.active {
                color: var(--sport-blue);
                border-bottom: 3px solid var(--sport-blue);
                background: none;
            }

    /* Order Card Styling */
    .order-item-card {
        transition: transform 0.15s ease-in-out, border-color 0.15s;
        border-radius: 8px;
    }

        .order-item-card:hover {
            border-color: var(--sport-blue) !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05) !important;
        }

    /* Badge Soft Colors */
    .bg-success-soft {
        background-color: #e8f5e9;
    }

    .bg-warning-soft {
        background-color: #fff3e0;
    }

    .text-light-grey {
        color: #dee2e6;
    }
</style>